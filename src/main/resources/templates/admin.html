<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet">
    <link th:href="@{/css/staff.css}" rel="stylesheet">
</head>
<body class="d-flex flex-column min-vh-100">
<!-- Navbar -->
<div th:replace="~{fragments/navbar :: navbarFragment}"></div>

<!-- Main content -->
<main class="flex-grow-1">
    <div class="container mt-5 pt-5">
        <div class="row">
            <div class="col-12 text-center mb-4">
                <h1 class="display-5 fw-bold text-primary">Trang chủ quản trị viên</h1>
                <p class="lead text-muted">Kiểm tra và quản lý dữ liệu xe từ camera, khe đỗ, thanh toán, cảnh báo, nhân viên và báo cáo.</p>
            </div>
        </div>
        <div class="row g-4">
            <!-- Card for Parking Logs -->
            <div class="col-md-4">
                <div class="card h-100 shadow-sm border-0 hover-card">
                    <div class="card-body text-center">
                        <i class="fas fa-camera fa-3x text-primary mb-3"></i>
                        <h5 class="card-title fw-bold">Quản lý xe vào/ra</h5>
                        <p class="card-text text-muted">Kiểm tra và xác nhận dữ liệu xe vào/ra từ camera.</p>
                        <p class="card-text text-muted">Xe đang trong bãi: <span th:text="${activeParkingLogs} ?: '0'"></span></p>
                        <a th:href="@{/admin/parking-logs}" class="btn btn-outline-primary">Xem chi tiết</a>
                    </div>
                </div>
            </div>
            <!-- Card for Parking Slots -->
            <div class="col-md-4">
                <div class="card h-100 shadow-sm border-0 hover-card">
                    <div class="card-body text-center">
                        <i class="fas fa-parking fa-3x text-success mb-3"></i>
                        <h5 class="card-title fw-bold">Quản lý khe đỗ</h5>
                        <p class="card-text text-muted">Xác nhận và cập nhật trạng thái khe đỗ.</p>
                        <p class="card-text text-muted">Khe trống: <span th:text="${availableSlots} ?: '0'"></span></p>
                        <a th:href="@{/admin/parking-slots}" class="btn btn-outline-success">Xem chi tiết</a>
                    </div>
                </div>
            </div>
            <!-- Card for Transactions -->
            <div class="col-md-4">
                <div class="card h-100 shadow-sm border-0 hover-card">
                    <div class="card-body text-center">
                        <i class="fas fa-money-bill-wave fa-3x text-info mb-3"></i>
                        <h5 class="card-title fw-bold">Quản lý thanh toán</h5>
                        <p class="card-text text-muted">Xử lý thanh toán dựa trên phí từ dữ liệu camera.</p>
                        <p class="card-text text-muted">Giao dịch hôm nay: <span th:text="${todayTransactions} ?: '0'"></span></p>
                        <a th:href="@{/admin/transactions}" class="btn btn-outline-info">Xem chi tiết</a>
                    </div>
                </div>
            </div>
            <!-- Card for Work Schedule -->
            <div class="col-md-4">
                <div class="card h-100 shadow-sm border-0 hover-card">
                    <div class="card-body text-center">
                        <i class="fas fa-calendar-alt fa-3x text-warning mb-3"></i>
                        <h5 class="card-title fw-bold">Lịch làm việc</h5>
                        <p class="card-text text-muted">Xem lịch ca làm việc của bạn.</p>
                        <a th:href="@{/admin/schedule}" class="btn btn-outline-warning">Xem chi tiết</a>
                    </div>
                </div>
            </div>
            <!-- Card for Alerts -->
            <div class="col-md-4">
                <div class="card h-100 shadow-sm border-0 hover-card">
                    <div class="card-body text-center">
                        <i class="fas fa-exclamation-triangle fa-3x text-danger mb-3"></i>
                        <h5 class="card-title fw-bold">Cảnh báo</h5>
                        <p class="card-text text-muted">Xử lý cảnh báo từ dữ liệu camera (quá hạn, lỗi nhận diện).</p>
                        <p class="card-text text-muted">Cảnh báo chưa xử lý: <span th:text="${unresolvedAlerts} ?: '0'"></span></p>
                        <a th:href="@{/admin/alerts}" class="btn btn-outline-danger">Xem chi tiết</a>
                    </div>
                </div>
            </div>
            <!-- Card for Parking Lots -->
            <div class="col-md-4">
                <div class="card h-100 shadow-sm border-0 hover-card">
                    <div class="card-body text-center">
                        <i class="fas fa-car-side fa-3x text-secondary mb-3"></i>
                        <h5 class="card-title fw-bold">Thông tin bãi đỗ</h5>
                        <p class="card-text text-muted">Thông tin cơ bản của bãi đỗ xe.</p>
                        <a th:href="@{/admin/parking-lots}" class="btn btn-outline-secondary">Xem chi tiết</a>
                    </div>
                </div>
            </div>
            <!-- Card for Staff Management -->
            <div class="col-md-4">
                <div class="card h-100 shadow-sm border-0 hover-card">
                    <div class="card-body text-center">
                        <i class="fas fa-users fa-3x text-dark mb-3"></i>
                        <h5 class="card-title fw-bold">Quản lý nhân viên</h5>
                        <p class="card-text text-muted">Quản lý thông tin và lịch làm việc của nhân viên.</p>
                        <p class="card-text text-muted">Tổng số nhân viên: <span th:text="${totalStaff} ?: '0'"></span></p>
                        <a th:href="@{/admin/users}" class="btn btn-outline-dark">Xem chi tiết</a>
                    </div>
                </div>
            </div>
            <!-- Card for Reports and Statistics -->
            <div class="col-md-4">
                <div class="card h-100 shadow-sm border-0 hover-card">
                    <div class="card-body text-center">
                        <i class="fas fa-chart-bar fa-3x text-purple mb-3"></i>
                        <h5 class="card-title fw-bold">Báo cáo thống kê</h5>
                        <p class="card-text text-muted">Xem báo cáo và thống kê về hoạt động bãi đỗ xe.</p>
                        <p class="card-text text-muted">Báo cáo hôm nay: <span th:text="${todayReports} ?: '0'"></span></p>
                        <a th:href="@{/admin/reports}" class="btn btn-outline-purple">Xem chi tiết</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- Footer -->
<div th:replace="~{fragments/footer :: footerFragment}"></div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    function logout() {
        window.location.href = '/logout';
    }
</script>
</body>
</html>